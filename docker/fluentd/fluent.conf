<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>

; <filter [태그 패턴]>
;   @type <필터 플러그인>
;   # 예시로 특정 필드 추가
;   add_field <필드 이름> <필드 값>
; </filter>

<filter backend_service>
  @type parser
  format json
  key_name log
  reserve_data true
</filter>

<filter ai_service>
  @type parser
  format json
  key_name log
  reserve_data true
</filter>

; <match [태그 패턴]>
;   @type <출력 플러그인>
;   # 예시로 Elasticsearch로 보내기
;   @type elasticsearch
;   host <호스트 주소>
;   port <포트>
; </match>

<match backend_service>
  @type elasticsearch
  host elasticsearch
  port 9200
  index_name backend-logs
  type_name backend
  logstash_format true
</match>

<match ai_service>
  @type elasticsearch
  host elasticsearch
  port 9200
  index_name ai-logs
  type_name ai
  logstash_format true
</match>

<filter **>
  @type parser
  format json
  key_name log
  reserve_data true
</filter>

; <match **>
;   @type elasticsearch
;   host elasticsearch
;   port 9200
;   logstash_format true
;   logstash_prefix fluentd
; </match>
